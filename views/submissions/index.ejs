<% layout('layouts/boilerplate')%>

<h1> list view </h1>

<!-- <div class="row">
    <div class="col-md" mb-3>
        <div id='map' style='width: 100%; height: 500px;'></div>
    </div>
</div> -->
<% for(let plastic of plastics) { %>
<div class="card" mb-3>
    <div class="row">
        <% for(let img of plastic.image) { %>
            <div class="col-md-4">
                <img class="img-fluid" alt="" src="<%=img.url%>">
            </div>
        <% } %>
        <div class="col-md-6">
            <div class="card-body">
                <h5 class="card-title"><%= plastic.title %></h5>
                <p class="card-body"><%= plastic.description %>
                
                <% if(currentUser) {%>
                    <br><strong>location:</strong> <%= plastic.address %>
                    <br><strong>private notes:</strong> <%= plastic.notes %></p>
                    <a class="btn btn-warning" href="/submissions/<%=plastic.id%>">View <%= plastic.title %></a>
                    <a class="btn btn-info" href="/submissions/<%=plastic.id%>/edit">Edit <%= plastic.title %></a>
                <form action="/submissions/<%=plastic.id%>?_method=DELETE" method="POST"><button class="btn btn-danger mt-1">Delete <%= plastic.title %></button></form>
                <% } %>
            </div>
        </div>
    </div>
</div>

<% } %> 
<script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
    const plastics = {features: <%-JSON.stringify(plastics)%>};
</script>
<script src="/js/clusterMap.js"></script>

